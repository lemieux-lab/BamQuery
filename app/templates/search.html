
{% extends "layout.html" %}
{% block content %}

<style>
	.progress {
		width: 100%;
		text-align: center;
	}
</style>

<div class="content-section">
	<div class="media">

		<!-- <p style="float: right;"><img class="rounded-circle account-img" src="{{ image_file }}"></p> --> 
		<h3>Interface Use:</h3>
		<small class="text-muted">
			<p>
This BamQuery interface facilitates tumor antigen prioritization. The interface queries a list of user-defined MAPs in mTECs (8) and Blood DCs (19) samples, as these cells are proxies for tumor specificity and immunogenicity. This interface also incorporates a predictive logistic regression model to report the conferred probability that a MAP is immunogenic. 
</p>
<p>
Entry requirements:
<br>1. Query name (This name will be required to download your results).
<br>2. List of MAPs (a maximum of 100 MAPs per run).
<br>3. Select the genome version and the dbSNP database.
</p>
		</small>
	</div>
</div>

<div class="content-section">

<form method="POST" action="" enctype="multipart/form-data">
	{{ form.hidden_tag() }}
	<fieldset class="form-group">
		<legend class="border-bottom mb-4">NewQuery</legend>  

		<div class="row" >
			<div class="col" class="form-group">

				{{ form.name_query.label(class="form-control-label") }}

				{% if form.name_query.errors %}
					{{ form.name_query(class="form-control form-control-sm is-invalid") }}
					<div class="invalid-feedback">
						{% for error in form.name_query.errors %}
							<span>{{ error }}</span>
						{% endfor %}
					</div>
				{% else %}
					{{ form.name_query(class="form-control") }}
				{% endif %}
				<small class="text-muted">
						Set a name to identify your query. Keep this name in mind to retrieve your results later.
				</small>
			</div>
			<div  class="col" class="form-group">

				{{ form.th_out.label(class="form-control-label") }}

				{% if form.th_out.errors %}
					{{ form.th_out(class="form-control form-control-sm is-invalid") }}
					<div class="invalid-feedback">
						{% for error in form.th_out.errors %}
							<span>{{ error }}</span>
						{% endfor %}
					</div>
				{% else %}
					{{ form.th_out(class="form-control") }}
				{% endif %}
				<small class="text-muted">
				
				This value changes the threshold that is considered for comparing the expression levels of different tissues. <br>
				Default = 8.55 rphm (reads per hundred million).
				</small>

			</div>
			<div class="col" >
			{{ form.genome_version.label(class="form-control-label") }}
			{{ form.genome_version }}
			<small class="text-muted">
					<br>
					Genome version supported : v26_88 / v33_99 / v38_104.
			</small>
		</div>
		
		<div class="col" >
			{{ form.data_base_snp.label(class="form-control-label") }}
			{{ form.data_base_snp}}
			<small class="text-muted">
				<br>
					dbSNP supported : 149 / 151 / 155 / None.
				</small>
				
		</div>
			
		<div class="row" >
			<div class="col"  class="form-group">

				{{ form.peptides_list.label() }} 
				<small class="text-muted">
					<br>
					 Limited number of peptides = 100 per run.
					<br>
					 BamQuery analyze MAPs ranging in length from 8 to 11 amino acids (aa).
					 
				<div class="row" >
				<small class="text-muted">
				<br>
					 Peptides example list: 
					 <br>
					 YVHMVTHF
					 <br>
					 AAMLDTVVFK
					 <br>
					 ...
				</small>
			</div>
				</small>
				<p align="align-self-center"> {{ form.peptides_list(class="form-control-file", cols="100", rows="11") }}</p>

				{% if form.peptides_list.errors %}
						{% for error in form.peptides_list.errors %}
						<span class="text-danger">{{ error }}</span>
						{% endfor %}
				{% endif %}

				
			</div>

		</div>

	</fieldset>
</div>
	<div class="container">
		<div class="col"> 
			<div class="form-group col">
			{{ form.submit(class="btn btn-outline-info") }}
			</div>
		</div>
	</div>
	</fieldset>
	<br>
		<div class="row"> 
		<legend class="border-bottom mb-4"></legend>
	</div>
</form>


<p></p>
{% endblock content %} 


